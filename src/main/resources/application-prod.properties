spring.datasource.url=${SPRING_DATASOURCE_URL}   # e.g. jdbc:postgresql://postgres:5432/appdb
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# HikariCP optimized for 1GB pod
# 12 connections × 8MB = 96MB for connection pool
spring.datasource.hikari.maximum-pool-size=12
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=app-hikari
spring.datasource.hikari.leak-detection-threshold=60000

# Redis Lettuce Pool optimized for 1GB pod
# 6 connections × 4MB = 24MB for Redis pool
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${REDIS_SSL:false}
spring.data.redis.timeout=2000
spring.data.redis.lettuce.pool.max-active=6
spring.data.redis.lettuce.pool.max-idle=4
spring.data.redis.lettuce.pool.min-idle=2

# Tomcat Thread Pool optimized for 1GB pod
# 100 threads × 1MB stack = 100MB for thread stacks
server.tomcat.threads.max=100
server.tomcat.threads.min-spare=20
server.tomcat.max-connections=1000
server.tomcat.accept-count=200
server.tomcat.connection-timeout=20000

# JPA Hibernate batch optimization
spring.jpa.properties.hibernate.jdbc.batch_size=30
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Cache TTL
spring.cache.redis.time-to-live=900000

app.security.jwt.secret-key={JWT_SECRET}
app.security.jwt.expiration=3600000
app.security.jwt.refresh-token.expiration=86400000
app.security.password-reset.expiration=900000

# Cookie Configuration - Production (HTTPS enforced)
app.security.cookie.enabled=true
app.security.cookie.secure=true
app.security.cookie.domain=${COOKIE_DOMAIN:}

app.security.cors.allowed-origins=*
app.security.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
app.security.cors.allowed-headers=Authorization,Content-Type,X-Requested-With,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
app.security.cors.exposed-headers=Access-Control-Allow-Origin,Access-Control-Allow-Credentials
app.security.cors.max-age=3600
